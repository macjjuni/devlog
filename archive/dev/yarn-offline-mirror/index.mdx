---
title: "yarn offline mirror(feat. íì‡„ë§)"
category: Dev
tag: ['Dev']
date: 2023-04-19
author: ê¾¸ìƒ
---
ê¸ˆìœµê¶Œì´ë‚˜ ì •ë¶€ê¸°ê´€ì—ì„œ ì¼ì„ í•œë‹¤ë©´ ì¸í„°ë„· ì¡°ì°¨ ì•ˆë˜ëŠ” í™˜ê²½ì—ì„œ ê°œë°œì„ í•  ìˆ˜ ìˆëŠ”ë°, ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ npm íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ node_modules í´ë”ë¥¼ í†µì§¸ë¡œ ì˜®ê²¨ê°€ëŠ” ê²ƒì´ ì•„ë‹Œ ì‚¬ìš©ì¤‘ì¸ íŒ¨í‚¤ì§€ë¥¼ tgz ì••ì¶• ìƒíƒœë¡œ ë§Œë“¤ì–´ ì˜®ê¸´ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì´ë‹¤.

ì••ì¶•í•œ íŒŒì¼ì„ ë°˜ì…í•˜ê¸° ìœ„í•´ ì ˆì°¨ê°€ ë˜ ìˆì„ ìˆ˜ ìˆë‹¤ ğŸ˜‡

## íŒ¨í‚¤ì§€ ì••ì¶•

### 1. í•´ë‹¹ í”„ë¡œì íŠ¸ ê²½ë¡œ ì´ë™

```bash
$ cd <í”„ë¡œì íŠ¸ ê²½ë¡œ>
```

### 2. .yarnrc íŒŒì¼ ìƒì„±

```bash
// .yarnrc íŒŒì¼ ìƒì„±
$ touch .yarnrc
```

### 3. .yarnrc íŒŒì¼ì— ìœ„ ë‚´ìš© ì‘ì„±

```bash
// .yarnrc
yarn-offline-mirror "./npm-packages-offline"
yarn-offline-mirror-pruning true
```

### 4. ìºì‹œ ì‚­ì œ

```bash
yarn cache clean
```

### 5. ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ì‚­ì œ

```bash
$ rm -rf node_modules
$ rm yarn.lock
```

### 6. íŒ¨í‚¤ê¸° ì„¤ì¹˜

```bash
yarn install
```

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— `npm-packages-offline`í´ë”ê°€ ìˆì„í…ë° ì•ˆì—ëŠ” tgz ì••ì¶•íŒŒì¼ì´ ìˆë‹¤. ì´ì œ node_modules í´ë”ë¥¼ ì œê±°í•˜ê³  í”„ë¡œì íŠ¸ë¥¼ ì••ì¶•í•´ì„œ ê°€ì ¸ê°„ë‹¤. ê°€ì ¸ê°€ê¸° ì „ 2ë²ˆì— íŒŒì¼ë„ ì±™ê¸°ë„ë¡ í•œë‹¤.

## ì˜¤í”„ë¼ì¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜

### 1. ì˜¤í”„ë¼ì¸ì—ì„œ yarn ì„¤ì¹˜

`yarn offline mirror` ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— yarn íŒ¨í‚¤ì§€ ë©”ë‹ˆì € ì„¤ì¹˜ëŠ” í•„ìˆ˜ë‹¤. yarnì—ì„œ jsíŒŒì¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆë„ë¡ íŒŒì¼ì„ ì œê³µí•˜ê³  ìˆëŠ”ë°, íŒŒì¼ í¬ê¸°ëŠ”4.87MB ìˆ˜ì¤€ì´ë‹¤.

[Releases Â· yarnpkg/yarn](https://github.com/yarnpkg/yarn/releases)

```bash
// yarn ì„¤ì¹˜ ëª…ë ¹ì–´
node ./yarn-1.22.19.js install --offline --production
```

ë…¸ë“œ ëª…ë ¹ì–´ë¡œ ì‹ ë‚˜ê²Œ ì„¤ì¹˜í•œë‹¤.

### 2. ì˜¤í”„ë¼ì¸ ì„¤ì¹˜

```bash
yarn install --offline --production
```

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œë¡œ ì´ë™í•´ì„œ ìœ„ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ ì¤€ë‹¤. **`yarn`**ì´ ì•Œì•„ì„œ **`npm-packages-offline`** í´ë”ë¥¼ ë’¤ì ¸ê°€ë©° íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ ì¤„ ê²ƒì´ë‹¤.

## Reference

[ì˜¤í”„ë¼ì¸ í™˜ê²½ì— NodeJS ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°](https://musma.github.io/2019/08/23/nodejs-offline-deployment.html)
