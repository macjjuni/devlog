---
title: "ν¨ν‚¤μ§€ λ²λ“¤ μ‚¬μ΄μ¦ μµμ ν™”"
category: Dev
tag: ['React', 'Npm']
date: 2024-09-25
author: κΎΈμƒ
---

## π“¦ λ²λ“¤ μ‚¬μ΄μ¦ ν™•μΈ

ν¨ν‚¤μ§€ λ²λ“¤ μ‚¬μ΄μ¦λ¥Ό ν™•μΈν•λ” λ°©λ²•μ€ μ—¬λ¬κ°€μ§€ μλ”λ°, λ‚΄ ν¨ν‚¤μ§€λ” NPMμ— λ°°ν¬λ μƒνƒλΌ λ²λ“¤ ν¬λΉ„μ•„μ—μ„ μ‰½κ² ν™•μΈν•  μ μμ—λ‹¤.

[Bundlephobia | Size of npm dependencies](https://bundlephobia.com/)

![before](/archive/dev/npm-package-optimization/before-size.webp)

kku-ui λ²λ“¤ κµ¬μ„±μ”μ† μ¤‘ κ°€μ¥ ν° μ‚¬μ΄μ¦λ΅ μ΅ν€μλ” λ…€μ„μ΄ **lodash**λΌμ„ λ†€λλ‹¤. λ¶„λ… νΈλ¦¬ μ‰μ΄ν‚Ήμ„ μ„ν•΄ lodash-esλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤κ³  μ•κ³  μμμ—λ„ μ–΄μ§Έμ„ κ·Έλƒ¥ lodashλ¥Ό μ‚¬μ©ν–λ”μ§€ μλ¬Έμ΄λ‹¤.

## π² νΈλ¦¬μ‰μ΄ν‚Ή(Tree Shaking)

![search-window](/archive/dev/npm-package-optimization/search-window.webp)

μ‚¬μ©ν•λ” κ³³μ€ uniqueId ν•¨μ ν•λ‚μΈλ°, λ‹Ήμ¥ lodash-esλ΅ κµμ²΄ν•κ³  λ‹¤μ‹ ν™•μΈν•΄λ³΄μ.

### π“ Before

```tsx
// src/util/lodashUtil.ts
import { uniqueId } from 'lodash';

export default { uniqueId };
```

### π“ After

```tsx
// src/util/lodashUtil.ts
import { uniqueId } from 'lodash-es';

export default { uniqueId };
```

## β¨ μµμ ν™” κ²°κ³Ό

![result](/archive/dev/npm-package-optimization/after-size.webp)

lodash-es ν¨ν‚¤μ§€λ΅ νΈλ¦¬ μ‰μ΄ν‚Ήμ„ μ μ©ν• κ²°κ³Ό λ²λ“¤ μ‚¬μ΄μ¦λ” 89.1KB μ—μ„ 65.6KBλ΅ 26% κ°μ†ν–λ‹¤. κ·Έλλ„ κµ¬μ„±μ—μ„ lodash-esκ°€ λ§μ€ λ¶€λ¶„μ„ μ°¨μ§€ν•κ³  μλ”λ°, μ‚¬μ©ν•λ” ν•¨μκ°€ ν•λ‚λΏμΈλ° μ €λ ‡κ² λ§μ΄ μ°¨μ§€ν•΄λ„ λλ‚ μ‹¶κΈ°λ„ ν•λ‹¤. μ‹κ°„μ΄ μ§€λ‚ λ‹¤λ¥Έ ν•¨μλ„ μ‚¬μ©ν•  κ°€λ¥μ„±μ΄ μμ–΄ μΌλ‹¨ νΈλ¦¬μ‰μ΄ν‚Ή μ μ©μ— μλ―Έλ¥Ό λ‘¬λ³Έλ‹¤.

## λ²μ™Έ

![code](/archive/dev/npm-package-optimization/code.webp)

![code2](/archive/dev/npm-package-optimization/code2.webp)

`lodash-es` λ‹¤μμΌλ΅ react-domμ—μ„ λ§μ€ μ©λ‰μ„ μ°¨μ§€ν•κ³  μμ–΄ μ•μ•„λ΄¤λ”λ°, νμ—…μ„ λ„μΈ λ•, `react`μ— `createRoot` ν•¨μλ¥Ό μ‚¬μ©ν•΄μ„ κ·Έλ¬λ‹¤.

![recent](/archive/dev/npm-package-optimization/recent-size.webp)

νμ—… λ„μ°λ” λ°©μ‹μ„ λ¦¬ν©ν† λ§ ν•λ‹ μ½”λ“ μ–‘λ„ μ¤„κ³  ν¨ν‚¤μ§€ μ‚¬μ΄μ¦λ„ μ¤„μ—λ‹¤ π‘