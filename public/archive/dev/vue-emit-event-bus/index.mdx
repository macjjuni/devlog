---
title: "Vue - emit & Event Bus"
category: Dev
tag: ['Vue']
date: 2023-04-04
author: ê¾¸ìƒ
---

## ğŸ“Œ emit

`emit`ì€ vueì—ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•˜ëŠ” í‚¤ì›Œë“œì´ë‹¤.`<script setup />` íƒœê·¸ ë‚´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

### ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸

```tsx
<template>
	<AComponent @toggle="toggle" />
</template>

<script setup lang="ts">
import AComponentfrom '@/components/AComponent.vue'

const toggle = () => {
	console.log('í† ê¸€ ì‹¤í–‰')
}
</script>
```

### ìì‹ ì»´í¬ë„ŒíŠ¸

```tsx
<template>
	<button @click="emit('toggle')">Toggle</button>
</template>

<script setup lang="ts">
const emit = defineEmits(['toggle'])
</script>
```

ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ toggleë¡œ ì´ë²¤íŠ¸ë¥¼ ë„˜ê²¨ì£¼ê³  ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `defineEmits`ë¥¼ ì‚¬ìš©í•´ ì „ë‹¬ë°›ì€ toggleì„ ë°°ì—´ì— ë‹´ì•„ì¤˜ ì„ ì–¸í•´ì£¼ë©´ `emit('toggle')` ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬ë°›ì•„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

<aside>
ğŸ’¡ `defineEmits`ëŠ” ë”°ë¡œ ì„ ì–¸ì„ ì•ˆí•´ì¤˜ë„ ëœë‹¤.

</aside>

## ğŸ“Œ ì´ë²¤íŠ¸ ë²„ìŠ¤(Event Bus)

Vue2 ë²„ì „ì—ì„œ ì´ë²¤íŠ¸ ë²„ìŠ¤ê°€ ë‚¨ìš©ë˜ëŠ” ì‚¬ë¡€ê°€ ë§ì•„ ê³µì‹ ë¬¸ì„œì—ì„œë„ ë‚´ìš©ì„ ì œê±°í•˜ê³  Vue3 ì—ì„œëŠ” í•´ë‹¹ ê¸°ëŠ¥ì´ ì œê±°ëë‹¤ê³  í•œë‹¤.

ê·¸ëŸ°ë° ë‹¤ë¥¸ ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.

### Install

```tsx
> yarn add tiny-emitter
```

### src/core/EventBus.js

```tsx
import emitter from 'tiny-emitter/instance'

export default {
  $on: (...args) => emitter.on(...args),
  $once: (...args) => emitter.once(...args),
  $off: (...args) => emitter.off(...args),
  $emit: (...args) => emitter.emit(...args),
}
```

## ì‚¬ìš©ë²•

### ì´ë²¤íŠ¸ ë“±ë¡

```tsx
<template>
	...
</template>

<script setup lang="ts">
import { onMounted, onUnmounted } from 'vue'
import Emitter from '@/core/eventBus'

onMounted(() => {
  Emitter.$on('event1', () => {
    console.log(123123)
  })
})

onUnmounted(() => {
  Emitter.$off('event1')
})
</script>
```

### ì´ë²¤íŠ¸ ì‚¬ìš©

```tsx
<template>
	<div>
		<button @click="Emitter.$emit('event1')">Test</button>
	</div>
</template>
<script setup lang="ts">
import Emitter from '@/core/eventBus'
</script>
```

[Events API | Vue 3 Migration Guide](https://v3-migration.vuejs.org/breaking-changes/events-api.html#event-bus)

ì´ë²¤íŠ¸ ë²„ìŠ¤ ëŒ€ì‹  vuexë¥¼ ì‚¬ìš©ì„ ì§€í–¥í•´ì•¼í•œë‹¤.
