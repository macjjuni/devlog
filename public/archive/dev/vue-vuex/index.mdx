---
title: "Vue - vuex"
category: Dev
tag: ['Vue']
date: 2023-03-31
author: ê¾¸ìƒ
---

VuexëŠ” ì „ì—­ ìƒíƒœê´€ë¦¬ë¥¼ í•  ë•Œ ì‚¬ìš©í•˜ëŠ”ë°, ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê¸°ë³¸ ì§€ì‹ë“¤ì„ ì •ë¦¬í•´ ë³¸ë‹¤. ì´ì œëŠ” Piniaê°€ ëŒ€ì„¸ë‹¤.

## ğŸ“Œ Install

```bash
vue add vuex
```

vue-cli ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì£¼ë©´ í´ë”êµ¬ì¡°ê¹Œì§€ ì•Œì•„ì„œ ì„¤ì •í•´ì¤€ë‹¤.

## ğŸ“ main.ts

```tsx
import { createApp } from 'vue'
// VueX
import store from './store'

const app = createApp(App)
app.use(store).mount('#app')
```

## ğŸ“Œ VueX ê¸°ë³¸ êµ¬ì„±

`State`: ì „ì—­ ë³€ìˆ˜

`Mutations`: Stateë¥¼ ë³€ê²½ì‹œí‚¤ëŠ” í•¨ìˆ˜(ë™ê¸°)

`Actions`: Stateë¥¼ ë³€ê²½ì‹œí‚¤ëŠ” í•¨ìˆ˜(ë¹„ë™ê¸°)

`Getters`: Computedì†ì„±ìœ¼ë¡œ Stateë¥¼ ì „ë‹¬í•´ì£¼ëŠ” í•¨ìˆ˜(ë¹ ë¥´ê²Œ Stateì— ì ‘ê·¼ ê°€ëŠ¥)

ì´ë¯¸ ë°¥ìƒì„ ë‹¤ ì°¨ë ¤ë†¨ê¸° ë•Œë¬¸ì— ìˆŸê°€ë½ìœ¼ë¡œ í¼ë¨¹ìœ¼ë©´ ëœë‹¤.

## State

```tsx
const Store = {
	state: () => ({
    userInfo: {
      id: null,
      token: null,
    },
  }),
	...
}
```

Stateê°€ ë§ì€ ê²½ìš° ëª¨ë“ˆë¡œ í˜•íƒœë¡œ ë¶„ë¦¬í•´ì„œ ë”°ë¡œ ì‘ì„±
    - src/store/modules/auth.ts
    - src/store/modules/todo.ts
    - â€¦
## Mutations

```tsx
const Store = {
	...
	mutations: {
    Login(state, userInfo) {
      state.userInfo.id = userInfo.id
      state.userInfo.token = userInfo.token
    },
    Logout(state) {
      state.userInfo.id = null
      state.userInfo.token = null
    },
  },
	...
}
```

- Stateë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì„ ì‘ì„±
- ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ `commit(â€™í•¨ìˆ˜ëª…â€™, ì „ë‹¬ ì¸ì)` ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©

## Actions

```tsx
const store = {
	...
	actions: {
	  setAccount({ commit }, uesrInfo) {

	    return new Promise((resolve, reject) => {
	      setTimeout(() => {
	        commit('Login', userInfo);
	        resolve()
	      }, 1000)
	    })

	  }
	},
	...
}
```

ActionsëŠ” Mutationsë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ”ë°, commit í•¨ìˆ˜ê°€ ì•„ë‹Œ dispatch í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ì•„ë˜ ìˆœì„œë¡œ ì‹¤í–‰ëœë‹¤.

1. `dispatch('action name', parameter)`
2. Actions ì‹¤í–‰
3. Mutations ì‹¤í–‰(State ë³€ê²½)

```tsx
dispatch('Login', userInfo).then(() => {
	...
});
```

ë¹„ë™ê¸°ë¥¼ ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ì—ì„œ `then catch` ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

## Getters

```tsx
const store = {
	state: () => ({
    userInfo: {
      id: null,
      token: null,
    },
  }),
	getters: {
    getUserId(state) {
      return state.userInfo.id
    },
  },
}
```

Computed ì†ì„±ìœ¼ë¡œ ì›í•˜ëŠ” Stateê°’ì„ ì •ì˜í•´ë‘ë©´ ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜  ìˆë‹¤.

```tsx
const userId = store.getters.[ëª¨ë“ˆëª…].getUserId()
```
